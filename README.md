# 🎁 漫游盲盒 - City Surprise

将探索的乐趣交还给未知｜AI驱动的城市微冒险生成器

---

## 💡 项目简介

“漫游盲盒”是一款旨在帮助用户发现城市惊喜的AI应用。厌倦了千篇一律的城市生活？让AI根据您的起点、兴趣和出行方式，为您量身定制一场充满文化、历史、美食或自然的城市微冒险路线！

---

## ✨ 主要功能

*   **智能路线生成**：根据用户选择的起点地址和路线风格（如“文艺”、“历史”），通过Dify工作流智能推荐合适的兴趣点（POI）并编排路线。
*   **高德地图集成**：利用高德地图API进行地理编码和步行路线规划，并在Leafmap/Folium地图上直观展示。
*   **灵活的探索模式**：支持“步行”和“骑行”两种出行方式（步行模式可展示真实路线规划，骑行模式为直线连接）。
*   **个性化推荐**：结合Dify AI智能体，为每个推荐的POI提供简介和探索贴士，增强用户体验。
*   **交互式界面**：使用 Gradio 构建直观易用的Web界面，方便用户输入偏好并查看结果。

---

## 🚀 如何使用

1.  **设置起点地址**：在“起点地址”输入框中填写您的出发地，或从下拉菜单中快速选择预设地点。
2.  **选择路线风格**：从“路线风格”多选框中选择您感兴趣的主题，建议选择1-3种（如“文艺”、“历史”、“美食”）。
3.  **选择出行方式**：选择您偏好的出行方式（步行模式将调用高德API生成详细步行路径）。
4.  **开启盲盒**：点击“🎲 开启盲盒，生成专属路线”按钮。
5.  **查看结果**：地图上将显示规划好的探索路线和打卡点，右侧的“路线详情”将提供每个点的详细介绍和探索贴士。

---

## 🛠️ 核心技术

*   **Python**：主要的开发语言。
*   **Gradio**：用于构建快速、易用的Web应用界面。
*   **Leafmap / Folium**：基于Folium的地图可视化库，用于在地图上绘制路线和POI。
*   **高德地图API**：提供地理编码（将地址转换为经纬度）和步行路线规划服务。
*   **Dify工作流**：一个LLMOps平台，用于编排AI智能体，根据用户输入智能生成POI列表和路线详情。
    *   通过Dify工作流调用高德地图地理编码和周边搜索工具，实现POI的智能发现和筛选。

---

## ⚠️ 注意事项

*   **高德地图API Key**：请确保在代码中配置了有效的高德地图API Key (`API_KEY`)。
*   **Dify工作流配置**：请确保Dify的API URL (`DIFY_API_URL`) 和 API Key (`DIFY_API_KEY`) 配置正确，并且Dify工作流能够正常运行并返回预期的JSON格式数据。
*   **API调用频率**：为避免触发高德地图API的限流，在代码中增加了`time.sleep(0.1)`来控制API调用频率。
